<mat-expansion-panel

    [expanded]="expansionPanelExpanded"
    (opened)="expansionPanelExpanded = true"
    (closed)="expansionPanelExpanded = false"
    >

    <mat-expansion-panel-header>
        <h3>Selection</h3>
    </mat-expansion-panel-header>

    <div *ngIf="this.collegeOptions.length > 1">
        <h4>Colleges</h4>
        <mat-form-field style="width: 300px;">
            <mat-label>Select a College</mat-label>
            <mat-select [(value)]="selectedCollege" (selectionChange)="collegeSelected()">
                <mat-option *ngFor="let college of this.collegeOptions" [value]="college">
                    {{college.displayName}}
                </mat-option>
            </mat-select>
        </mat-form-field>

    </div>

    <div *ngIf="this.selectedCollege">

        <button title="Add Year Class" class="upsert-button" mat-mini-fab color="primary" (click)="addYearClass()">
            <i class="material-icons">add</i>
        </button>
        <h4 class="left">Year classes</h4>

        <div style="clear: both;" *ngIf="this.yearClassOptions.length > 0">

            <div *ngIf="this.selectedYearClass" style="width: auto; float: left;">

                <button title="Edit" mat-mini-fab color="primary" class="upsert-button"
                    (click)="editYearClass(this.selectedYearClass)">
                    <i class="material-icons">edit</i>
                </button>

            </div>

            <mat-form-field style="width: 300px; float: left;">
                <mat-label>Select a Year Class</mat-label>
                <mat-select [(value)]="selectedYearClass" (selectionChange)="this.yearClassSelected()">
                    <mat-option *ngFor="let yearClass of this.yearClassOptions" [value]="yearClass">
                        {{yearClass.teacherName}}, {{yearClass.yearClassName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>


        </div>
    </div>

</mat-expansion-panel>

<div *ngIf="this.selectedCollege">

    <div style="clear: both;" *ngIf="this.selectedYearClass">
        <button title="Add homework assignment" class="upsert-button" mat-mini-fab color="primary"
            (click)="addHomeWorkAssignment()">
            <i class="material-icons">add</i>
        </button>
        <button title="Add homework assignments from a standard list" class="upsert-button" mat-mini-fab color="primary"
            (click)="addHomeWorkAssignmentsFromList()">
            <i class="material-icons">library_books</i>
        </button>
        <h3 class="left">
            {{this.selectedCollege.displayName}}
            {{this.selectedYearClass.teacherName}}
            {{this.selectedYearClass.yearClassName}}
        </h3>
    </div>

    <div style="clear: both;" *ngIf="homeWorkAssignments.length > 0">

        <div class="grid-container">

            <div class="table-container-scroll mat-elevation-z8_">

                <div *ngIf="currentHomeWorkAssignment">

                    <h3>Current Homework Assignment</h3>

                    <div [ngClass]="isHomeWorkAssignmentSelected(currentHomeWorkAssignment.id)" >

                        <div class="grid-container-left">

                            <div
                            class="selectable due-date"    
                            (click)="selectHomeWorkAssignment(currentHomeWorkAssignment)">
                                <strong>{{currentHomeWorkAssignment.dueDate.format('LL')}}</strong>
                            </div>

                            <div style="text-align: end;" class="hwa-action-buttons action-button-wrapper">

                                <button
                                    class="list-action"
                                    mat-mini-fab
                                    [matMenuTriggerFor]="appMenu"
                                    color="primary"
                                    >
                                    <i class="material-icons">more_vert</i>
                                </button>

                                <mat-menu #appMenu="matMenu">

                                    <button
                                        (click)="copyText(getLink(currentHomeWorkAssignment))"
                                        mat-menu-item
                                        color="primary"
                                    >
                                        <i class="material-icons">file_copy</i>
                                        Copy homework link
                                    </button>

                                    <button
                                        (click)="editHomeWorkAssignment(currentHomeWorkAssignment)"
                                        mat-menu-item
                                        color="primary" class="list-action"
                                        >
                                        <i class="material-icons">edit</i>
                                        Change the due date
                                    </button>
                                
                                    <button 
                                        mat-menu-item
                                        color="primary" class="list-action"
                                        (click)="viewWords()">
                                        <i class="material-icons">assignment</i>
                                        View words
                                    </button>

                                    <button
                                        mat-menu-item
                                        color="primary" class="list-action"
                                        (click)="viewSubmissions()">
                                        <i class="material-icons">face</i>
                                        View submissions
                                    </button>

                                    <button
                                        mat-menu-item
                                        color="primary" class="list-action"
                                        (click)="deleteHomeWorkAssignment(currentHomeWorkAssignment)">
                                        <i class="material-icons">delete</i>
                                        Delete
                                    </button>
                                    
                                    <!-- <button
                                        attr.data-clipboard-text="{{getLink(currentHomeWorkAssignment)}}"
                                        id="{{currentHomeWorkAssignment.id}}" title="Copy homework Link" mat-mini-fab color="primary" class="list-action"
                                        (click)="copyLinkHomeWorkAssignment(currentHomeWorkAssignment)">
                                        <i class="material-icons">file_copy</i>
                                    </button> -->
                                    
                                </mat-menu>
                                
                            </div>

                        </div>

                    </div>
                    <hr>
                </div>

                <h3>
                    <span *ngIf="currentHomeWorkAssignment">Other </span>
                    Homework Assignments
                </h3>

                <div *ngFor="let homeWorkAssignment of remainingHomeWorkAssignments"
                    [ngClass]="isHomeWorkAssignmentSelected(homeWorkAssignment.id)"
                    >

                    <div class="grid-container-left">

                        <div
                            class="selectable due-date"
                            (click)="selectHomeWorkAssignment(homeWorkAssignment)">
                            <strong>{{homeWorkAssignment.dueDate.format('LL')}}</strong>
                        </div>

                        <div style="text-align: end;" class="hwa-action-buttons action-button-wrapper">

                            <button
                                class="list-action"
                                mat-mini-fab
                                [matMenuTriggerFor]="appMenu"
                                color="primary"
                                >
                                <i class="material-icons">more_vert</i>
                            </button>

                            <mat-menu #appMenu="matMenu">

                                <button
                                    (click)="copyText(getLink(homeWorkAssignment))"
                                    mat-menu-item
                                    color="primary"
                                >
                                    <i class="material-icons">file_copy</i>
                                    Copy homework link
                                </button>

                                <button
                                    (click)="editHomeWorkAssignment(homeWorkAssignment)"
                                    mat-menu-item
                                    color="primary" class="list-action"
                                    >
                                    <i class="material-icons">edit</i>
                                    Change the due date
                                </button>
                            
                                <button 
                                    mat-menu-item
                                    color="primary" class="list-action"
                                    (click)="viewWords()">
                                    <i class="material-icons">assignment</i>
                                    View words
                                </button>

                                <button
                                    mat-menu-item
                                    color="primary" class="list-action"
                                    (click)="viewSubmissions()">
                                    <i class="material-icons">face</i>
                                    View submissions
                                </button>

                                <button
                                    mat-menu-item
                                    color="primary" class="list-action"
                                    (click)="deleteHomeWorkAssignment(homeWorkAssignment)">
                                    <i class="material-icons">delete</i>
                                    Delete
                                </button>
                                
                                <!-- <button
                                    attr.data-clipboard-text="{{getLink(homeWorkAssignment)}}"
                                    id="{{homeWorkAssignment.id}}" title="Copy homework Link" mat-mini-fab color="primary" class="list-action"
                                    (click)="copyLinkHomeWorkAssignment(homeWorkAssignment)">
                                    <i class="material-icons">file_copy</i>
                                </button> -->
                                
                            </mat-menu>
                            
                        </div>

                    </div>

                </div>

            </div>

            <div class="table-container-scroll_" *ngIf="selectedHomeWorkAssignment">

                <div *ngIf="showWords">

                    <button title="Add word" class="upsert-button" mat-mini-fab color="primary"
                        (click)="addHomeWorkAssignmentItem()">
                        <i class="material-icons">add</i>
                    </button>

                    <h3 class="left">Words for homework due {{selectedHomeWorkAssignment.dueDate.format('LL')}}</h3>

                    <div style="clear: both;"
                        *ngFor="let homeWorkAssignmentItem of selectedHomeWorkAssignment.homeWorkAssignmentItems">

                        <p>
                            <strong>{{homeWorkAssignmentItem.word}}</strong>
                            "{{homeWorkAssignmentItem.sentence}}"
                            <br />
                            <span class="action-button-wrapper">

                                <button title="Edit" mat-mini-fab color="primary" class="list-action"
                                    (click)="editHomeWorkAssignmentItem(homeWorkAssignmentItem)">
                                    <i class="material-icons">edit</i>
                                </button>

                                <button title="Delete" mat-mini-fab color="primary" class="list-action"
                                    (click)="deleteHomeWorkAssignmentItem(homeWorkAssignmentItem)">
                                    <i class="material-icons">delete</i>
                                </button>
                            </span>
                        </p>

                        <hr />
                    </div>

                </div>

                <div *ngIf="showSubmittedWork">

                    <h3 class="left">Submitted homework for {{selectedHomeWorkAssignment.dueDate.format('LL')}}</h3>

                    <div style="clear: both;" *ngIf="selectedHomeWorkAssignment.submittedHomeWorks.length === 0">
                        There are no submissions yet.
                    </div>
                    <div style="clear: both;" *ngFor="let submission of selectedHomeWorkAssignment.submittedHomeWorks">
                        {{submission.studentName}} &#40;{{submission.score}}&#41;
                        <hr />
                    </div>
                </div>

            </div>
        </div>

    </div>

</div>